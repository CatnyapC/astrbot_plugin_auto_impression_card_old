{
  "Basic": {
    "description": "基础设置",
    "type": "object",
    "hint": "插件开关",
    "items": {
      "enabled": {
        "description": "启用插件",
        "type": "bool",
        "default": true
      },
      "bot_user_id": {
        "description": "机器人用户ID",
        "type": "string",
        "hint": "用于别称固定映射",
        "default": ""
      },
      "bot_aliases": {
        "description": "机器人别称",
        "type": "list",
        "hint": "这些别称会强制映射到机器人用户ID",
        "default": []
      }
    }
  },
  "Update": {
    "description": "更新阈值",
    "type": "object",
    "hint": "控制画像更新触发条件",
    "items": {
      "update_msg_threshold": {
        "description": "消息阈值",
        "type": "int",
        "hint": "新消息数达到阈值即触发更新",
        "default": 50
      },
      "update_time_threshold_sec": {
        "description": "时间阈值(秒)",
        "type": "int",
        "hint": "距离上次更新超过该时间即触发更新",
        "default": 7200
      },
      "group_batch_known_users_max": {
        "description": "候选用户数量",
        "type": "int",
        "hint": "群批量分析时纳入的候选用户数上限（按最近活跃排序）",
        "default": 50
      },
      "group_batch_enable_nickname_match": {
        "description": "昵称匹配",
        "type": "bool",
        "hint": "允许用昵称文本匹配推断被评价对象",
        "default": true
      },
      "group_batch_enable_semantic_attribution": {
        "description": "语义归属",
        "type": "bool",
        "hint": "使用 LLM 进行消息归属（无 @ / 昵称时也可推断）",
        "default": true
      },
      "group_batch_attribution_max_messages": {
        "description": "归属消息上限",
        "type": "int",
        "hint": "单次归属分析包含的最大消息数",
        "default": 120
      },
      "group_batch_attribution_max_targets_per_message": {
        "description": "归属目标上限",
        "type": "int",
        "hint": "每条消息最多归属到的用户数",
        "default": 2
      },
      "group_batch_attribution_include_summary": {
        "description": "归属带摘要",
        "type": "bool",
        "hint": "归属分析时提供用户摘要以便语义匹配",
        "default": true
      },
      "evidence_half_life_days": {
        "description": "证据半衰期(天)",
        "type": "float",
        "hint": "证据贡献随时间衰减的半衰期",
        "default": 30.0
      },
      "fact_confidence_min": {
        "description": "事实最小置信度",
        "type": "float",
        "hint": "低于该阈值的 facts 将被丢弃",
        "default": 0.1
      }
    }
  },
  "Injection": {
    "description": "上下文注入",
    "type": "object",
    "hint": "控制注入长度与强度",
    "items": {
      "inject_max_chars": {
        "description": "summary 最大字符数",
        "type": "int",
        "default": 600
      },
      "inject_max_traits": {
        "description": "traits 最大数量",
        "type": "int",
        "default": 8
      },
      "inject_max_facts": {
        "description": "facts 最大数量",
        "type": "int",
        "default": 6
      }
    }
  },
  "Alias": {
    "description": "称呼分析",
    "type": "object",
    "hint": "LLM 称呼抽取触发条件",
    "items": {
      "alias_analysis_batch_size": {
        "description": "别称分析批量阈值",
        "type": "int",
        "hint": "待分析消息达到阈值触发 LLM 分析",
        "default": 15
      }
    }
  },
  "Model": {
    "description": "模型选择",
    "type": "object",
    "hint": "留空则使用会话当前模型",
    "items": {
      "update_provider_id": {
        "description": "画像更新模型 Provider ID",
        "type": "string",
        "hint": "留空则使用会话当前模型",
        "default": ""
      },
      "alias_provider_id": {
        "description": "别称分析模型 Provider ID",
        "type": "string",
        "hint": "留空则使用会话当前模型",
        "default": ""
      },
      "attribution_provider_id": {
        "description": "语义归属模型 Provider ID",
        "type": "string",
        "hint": "留空则使用会话当前模型",
        "default": ""
      },
      "phase1_provider_id": {
        "description": "Phase1 模型 Provider ID",
        "type": "string",
        "hint": "留空则使用 update_provider_id / 会话当前模型",
        "default": ""
      },
      "phase2_provider_id": {
        "description": "Phase2 模型 Provider ID",
        "type": "string",
        "hint": "留空则使用 update_provider_id / 会话当前模型",
        "default": ""
      },
      "phase3_provider_id": {
        "description": "Phase3 模型 Provider ID",
        "type": "string",
        "hint": "留空则使用 update_provider_id / 会话当前模型",
        "default": ""
      }
    }
  },
  "Filters": {
    "description": "消息过滤",
    "type": "object",
    "hint": "控制采集范围",
    "items": {
      "ignore_short_text_len": {
        "description": "忽略短文本阈值",
        "type": "int",
        "hint": "小于该长度的文本不采集",
        "default": 3
      },
      "ignore_regex": {
        "description": "忽略正则",
        "type": "string",
        "hint": "匹配则不采集",
        "default": ""
      }
    }
  },
  "Debug": {
    "description": "调试",
    "type": "object",
    "hint": "调试日志开关",
    "items": {
      "debug_mode": {
        "description": "调试模式",
        "type": "bool",
        "hint": "开启后会输出详细上下文日志",
        "default": false
      }
    }
  }
}
